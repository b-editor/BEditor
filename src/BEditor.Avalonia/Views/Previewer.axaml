<UserControl
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:ctr="using:BEditor.Controls"
  xmlns:props="using:BEditor.Properties"
  xmlns:convert="using:BEditor.Converters"
  mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
  x:Class="BEditor.Views.Previewer">
  <UserControl.Resources>
    <convert:FrameToDoubleConverter x:Key="FrameToDoubleConverter"/>
  </UserControl.Resources>
  <Grid RowDefinitions="*,Auto">
    <Image
      Source="{Binding PreviewImage.Value, Mode=OneWay}"
      IsHitTestVisible="False"
      Margin="0"/>

    <Grid Grid.Row="1" IsEnabled="{Binding IsOpened.Value, Mode=OneWay}">
      <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition Width="Auto"/>
      </Grid.ColumnDefinitions>


      <ctr:SeekSlider
        IsEnabled="{Binding IsOpened.Value, Mode=OneWay}"
        Maximum="{Binding App.Project.PreviewScene.TotalFrame.Value, Mode=OneWay}"
        Value="{Binding App.Project.PreviewScene.PreviewFrame, Mode=TwoWay, Converter={StaticResource FrameToDoubleConverter}}"
        VerticalAlignment="Center"
        Margin="10,0"
        x:Name="slider"/>
      
      <VirtualizingStackPanel Grid.Column="1" Orientation="Horizontal">
        <Button
          Command="{Binding MoveToTop, Mode=OneTime}"
          Background="Transparent"
          Foreground="White"
          ToolTip.Tip="{x:Static props:Strings.MoveToTop}">
          <PathIcon Data="M14.6469 6.30373L14.7195 6.21961C14.9858 5.95338 15.4025 5.92921 15.6961 6.1471L15.7802 6.21972L20.7768 11.2174C21.0429 11.4835 21.0672 11.8999 20.8496 12.1935L20.7771 12.2776L15.7805 17.2811C15.4878 17.5742 15.0129 17.5745 14.7198 17.2818C14.4534 17.0157 14.4289 16.5991 14.6465 16.3053L14.7191 16.2211L18.43 12.504L3.75 12.5049C3.3703 12.5049 3.05651 12.2228 3.00685 11.8567L3 11.7549C3 11.3752 3.28215 11.0615 3.64823 11.0118L3.75 11.0049L18.443 11.004L14.7194 7.28028C14.4532 7.01398 14.429 6.59732 14.6469 6.30373L14.7195 6.21961L14.6469 6.30373Z">
            <PathIcon.RenderTransform>
              <TransformGroup>
                <ScaleTransform/>
                <SkewTransform/>
                <RotateTransform Angle="180"/>
                <TranslateTransform/>
              </TransformGroup>
            </PathIcon.RenderTransform>
          </PathIcon>
        </Button>
        <Button
          Command="{Binding MoveToPrevious, Mode=OneTime}"
          Background="Transparent"
          Foreground="White"
          ToolTip.Tip="{x:Static props:Strings.MoveToPreviousFrame}">
          <PathIcon Data="M896 374l-806 650l806 645v-1295zM768 641v762l-474 -379zM986 1024l806 645v-1295zM1664 641v762l-474 -379z"/>
        </Button>
        <Button
          Command="{Binding PlayPause, Mode=OneTime}"
          Background="Transparent"
          Foreground="White"
          ToolTip.Tip="{x:Static props:Strings.PlayPause}">
          <PathIcon Data="M1792 1024l-1280 -896v1792zM640 374l929 650l-929 650v-1300z"/>
        </Button>
        <Button
          Command="{Binding MoveToNext, Mode=OneTime}"
          Background="Transparent"
          Foreground="White"
          ToolTip.Tip="{x:Static props:Strings.MoveToNextFrame}">
          <PathIcon Data="M1152 1669l806 -645l-806 -650v1295zM1280 1403v-762l474 383zM256 374v1295l806 -645zM384 1403v-762l474 383z"/>
        </Button>
        <Button
          Command="{Binding MoveToEnd, Mode=OneTime}"
          Background="Transparent"
          Foreground="White"
          ToolTip.Tip="{x:Static props:Strings.MoveToEnd}">
          <PathIcon Data="M14.6469 6.30373L14.7195 6.21961C14.9858 5.95338 15.4025 5.92921 15.6961 6.1471L15.7802 6.21972L20.7768 11.2174C21.0429 11.4835 21.0672 11.8999 20.8496 12.1935L20.7771 12.2776L15.7805 17.2811C15.4878 17.5742 15.0129 17.5745 14.7198 17.2818C14.4534 17.0157 14.4289 16.5991 14.6465 16.3053L14.7191 16.2211L18.43 12.504L3.75 12.5049C3.3703 12.5049 3.05651 12.2228 3.00685 11.8567L3 11.7549C3 11.3752 3.28215 11.0615 3.64823 11.0118L3.75 11.0049L18.443 11.004L14.7194 7.28028C14.4532 7.01398 14.429 6.59732 14.6469 6.30373L14.7195 6.21961L14.6469 6.30373Z"/>
        </Button>
      </VirtualizingStackPanel>
    </Grid>
  </Grid>
</UserControl>
